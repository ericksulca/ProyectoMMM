{% extends 'base/base_login.html' %}
{% load staticfiles %}


{% block breadcrumb %}
<ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="{% url 'usuario:principal' %}">Principal</a>
  </li>
  <li class="breadcrumb-item active">
    <a href="{% url 'deposito:index' %}"></a>Depósitos
  </li>
  <!-- <li class="breadcrumb-item">
    <a href="{% url 'deposito:deposito_usuario' %}">Nuevo deposito</a>
  </li>
  <li class="breadcrumb-item active">
    <a href="{% url 'deposito:deposito_solicitud' %}">Respuesta a prestamos</a>
  </li> -->
</ol>
{% endblock %}

{% block content %}

<h1>Nuevo deposito</h1>

{%ifequal monto None%}
<p class="text-info"><b>El monto máximo requerido por todos los usuarios es de S/ <input type="text" id="id_monto" value="0" disabled></b> </p>
{%else%}
<p class="text-info"><b>El monto máximo requerido por todos los usuarios es de S/ <input type="text" id="id_monto" value="{{monto}}" disabled> </b></p>
{%endifequal%}
<form  method="POST" id="form-solicitud">
  <!-- action="{% url 'deposito:deposito_solicitud' %}" -->
    {% csrf_token %}
    <label for="monto">Monto</label>
    <input type="number" id="monto" class="form-control-p" name="monto" placeholder="0.00" step="0.01">
    <!-- <input type="text" name="id_emisor" value=""> -->
    <input type="submit" value="Guardar" class="btn btn-primary" id="id_submit">
    <div class="alert-danger" id="msg">

    </div>
</form>


{%for a in lista_receptores%}
{{a}}
{%endfor%}
<hr>
{% if deposito_realizar %}
No puede realizar más operaciones hasta realizar el deposito a las siguientes cuentas bancarias.

<table class="table table-bordered">
  <thead>
    <tr>
      <td>NÚMERO DE CUENTA</td>
      <td>MONTO</td>
      <td>CONFIRMAR</td>
    </tr>
  </thead>
  <tfoot>
    <tr>
      <td>NÚMERO DE CUENTA</td>
      <td>MONTO</td>
      <td>CONFIRMAR</td>
    </tr>
  </tfoot>
  <tbody>
    {%for m in deposito_realizar%}
    <tr>
      <td>{{m.receptor.numero_cuenta}}</td>
      <td>{{m.monto}}</td>
      <td><button type="button" class="btn btn-primary glyphicon glyphicon-edit" name="button"> </button> </td>
    </tr>

    {%endfor%}
  </tbody>
</table>

{% endif %}



<!-- {{usuario.dni}} -->

<!-- <p>NOTIFICACIONES</p> -->
<!-- {%for notificacion in notificaciones%}
<p>{{notificacion.id}}</p><br>
{% endfor %} -->


{% endblock %}

{% block scripts %}

<script>

$("#monto").keyup(function(){
  var monto_ingresado=parseFloat($("#monto").val());
  var monto_maximo=parseFloat($("#id_monto").val());

  console.log(monto_ingresado+' '+monto_maximo);

  if(monto_ingresado>monto_maximo){

    $('#id_submit').attr('disabled','true');
    $('#msg').html('El monto ingresado es mayor al monto solicitado');

  }else{
    $('#id_submit').removeAttr('disabled');
    $('#msg').html('');
  }
})

</script>

{% endblock %}
